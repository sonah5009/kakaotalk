"use strict";exports.id=282,exports.ids=[282],exports.modules={3282:(e,a,t)=>{t.d(a,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var r=t(784),s=t(9885),l=t(4997),n=t(7114),d=t(7625);let __WEBPACK_DEFAULT_EXPORT__=()=>{let[e,a]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e=parseInt(localStorage.getItem("user_key")),fetchFriends=async()=>{let t=await l.Z.get("http://localhost:8000/friends",{params:{user_key:e}}),r=t.data.friend_key,s=await Promise.all(r.map(async e=>{let a=await l.Z.get("http://localhost:8000/friend-name",{params:{friend_key:e}});return{key:e,name:a.data.friend_name}}));a(s)};fetchFriends()},[]);let t=(0,n.useRouter)(),HandleFriendClick=async e=>{let a=parseInt(localStorage.getItem("user_key"));try{let r=await l.Z.post("http://localhost:8000/create-or-get-personal-chat-room",{user_key:a,friend_key:e}),{room_id:s,room_key:n,room_name:d}=r.data;t.push(`/dashboard/chat/${n}`)}catch(e){console.error("Error creating/getting chat room",e.response.data)}},i=e[0]?.name,c=e[0]?.key;return r.jsx("div",{children:(0,r.jsxs)("div",{children:[r.jsx("ul",{children:(0,r.jsxs)("li",{className:"flex py-1 hover:bg-surface-dark/20",onClick:()=>HandleFriendClick(c),children:[r.jsx(d.Vyx,{size:40,className:"mx-2 text-2xl rounded-md bg-primary-skyblue text-background"}),i]})}),(0,r.jsxs)("ul",{children:[r.jsx("br",{}),r.jsx("div",{className:"text-sm font-light ",children:"Friends"}),e.slice(1)?.map((e,a)=>r.jsxs("li",{className:"flex py-1 hover:bg-surface-dark/20",onClick:()=>HandleFriendClick(e.key),children:[r.jsx(d.Vyx,{size:40,className:"mx-2 text-2xl rounded-md bg-primary-skyblue text-background"}),e.name]},a))]})]})})}}};